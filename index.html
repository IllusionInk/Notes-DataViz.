<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Visdown - Markdown for Visualisation</title>
  <meta name="description" content="Create Simple Visualisation Charts with Markdown">

  <script src="lib/vega.min.js"></script>
  <script src="lib/vega-lite.min.js"></script>
  <script src="lib/vega-embed.min.js"></script>
  <script src="lib/marked.min.js"></script>
  <script src="lib/yaml.min.js"></script>

  <style>
    #visdown-output {max-width: 1000px; margin: 0 auto;}
    #visdown-input {display: none;}

   body {width: 900px; margin: 0 auto; background-color: #f7f4dc;font-family:sans-serif;}
   h1{color:#605000;}
   h2{color:#605000;}
   h3{color:#605d51;}
   h4{color:#605d51;}
   p{color:#776f42; font-size: 16px;}
  </style>
</head>
<body>
<h1> Impact of Demonetisation </h1>
<h3> A study of the Indian Currency </h3>
</br>
<p>  A representation of the changing position of the denominations in the economy. A historical trend depicting the rise and occurence of Rs.500 and Rs.1000 denominations</p>

<div id="visdown-input">

```vis
data:
  url: data/notes.csv
height: 300
width: 700
layer:
- mark: bar
  encoding:
   x:
    field: year
    type: N
    axis:
     labelAngle: -45
     title: "Years of Circulation"
   y:
    field: money
    type: Q
    stack: normalize
    axis:
     title: "Money in Circulation (in Billions)"
    scale:
     paddingInner: 200
   color:
    field: denom
    legend:
     title: "Denominations"
    scale:
     range:
     - "#d1d1d1"
     - "#d1d1d1"
     - "#d1d1d1"
     - "#d1d1d1"
     - "#d1d1d1"
     - "#d1d1d1"
     - "#d1d1d1"
     - "#e0d67c"
     - "#d88e77"

    type: N
- mark: text
  encoding:
   x:
    field: year
    type: N
```
<h3> Story in 2015 </h3>

```vis

width: 800
height: 50
data:
 url: data/notes2015.csv
transform:
layer:
- mark: bar
  encoding:
    y:
      field: year
      type: N
    x:
      field: money
      type: Q
      stack: normalize
    color:
      field: state
      type: N
- transform:
  - aggregate:
    - op: sum
      field: money
      as: moneysum
  mark: text
  encoding:
    y:
      field: year
      type: N
    x:
      field: money
      type: Q
      stack: normalize
    text:


```

<h2> A Story of Notes </h2>
A comparative analysis of the number of notes in circulation. Key years being 1987 and  2011.
Observations:
1. 500 rs. notes were released in 1987, thereby causing denominations like 20 Rs. to show a dip in the no. of currency notes
2. 1000rs. note were released in 2001. Interestingly the 50 rs. notes plumetted further in time , while the 20rs. notes continued to remain low


```vis

width: 600
height: 500
data:
  url: data/notes.csv
layer:

- mark: bar
  encoding:
    x:
      field: year
      type: N
    y:
      aggregate: sum
      field: number
      type: Q
      axis:
        grid: false
        orient: left
    color:
      value: 73d886
    opacity:
      value: 0.35

- transform:
  - filter: (datum.value == 100) || (datum.value == 500) || (datum.value == 20) || (datum.value == 50) || (datum.value == 1000)
  mark:
    type: point
  encoding:
    x:
      field: year
      type: N
    y:
      field: number
      type: Q
      axis:
        grid: false
        orient: right
    color:
      field: value
    shape:
      field: value
      type: N


- transform:
  - filter: (datum.year == 2001) || (datum.year == 1987)
  - calculate: (0*datum.year)
    as: yearzero
  mark:
    type: point
  encoding:
    x:
      field: year
      type: N
    y:
      field: yearzero
      type: Q
      axis:
       title:
    size:
       value: 200
resolve:
  scale:
    y: independent

```

<h2> Share in the economy </h2>
<p>100Rs. Notes steadily climbed and crossed the average no. of total notes in circulation.
By the end of 2015, they had the most presence in terms of note numerals.
</p>


```vis

data:
 url: data/notes.csv
transform:
- calculate: 'datum.value == 500 ? "Denom_500":"DENOM_Other"'
  as: 500money
hconcat:
- mark: area
  width: 350
  encoding:
    x:
      field: year
      type: N
    y:
      aggregate: sum
      field: money
      type: Q
    color:
      field: 500money
      type: N
- mark: area
  width: 350
  encoding:
    x:
      field: year
      type: N
      axis:
       title: "Years in Circulation"
       tickCount: 3
    y:
      aggregate: sum
      field: number
      type: Q
    color:
      field: 500money
      scale:
        range:
        - "#d1d1d1"
        - "#e0d67c"
```

```vis

data:
 url: data/notes.csv
transform:
- calculate: 'datum.value == 1000 ? "Denom_1000":"DENOM_Other"'
  as: 1000money
hconcat:
- mark: area
  width: 350
  encoding:
    x:
      field: year
      type: N
    y:
      aggregate: sum
      field: money
      type: Q
    color:
      field: 1000money
      type: N
- mark: area
  width: 350
  encoding:
    x:
      field: year
      type: N
      axis:
       title: "Years in Circulation"
       tickCount: 3
    y:
      aggregate: sum
      field: number
      type: Q
    color:
      field: 1000money
      scale:
        range:
        - "#d1d1d1"
        - "#d88e77"
```

</div>
<div id="visdown-output"></div>
<script src="visdown.js"></script>

</body>
</html>
